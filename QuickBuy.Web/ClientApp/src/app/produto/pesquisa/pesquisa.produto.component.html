<h1 class="h4 titulo mb-4 mt-4">Pesquisa de Produtos</h1>
<p *ngIf="!produtos">Carregando Produtos...</p>
<script>
  var modal = document.getElementById("myModal");

  // Get the image and insert it inside the modal - use its "alt" text as a caption
  var img = document.getElementById("myImg{{p.id}}");
  var modalImg = document.getElementById("img01");
  var captionText = document.getElementById("caption");
  img.onclick = function () {
    modal.style.display = "block";
    modalImg.src = this.src;
    captionText.innerHTML = this.alt;
    alert('oi');
  }

  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close")[0];

  // When the user clicks on <span> (x), close the modal
  span.onclick = function () {
    modal.style.display = "none";
  }
  function modalZoom(imageID){
    //alert(imageID);
  }
</script>
<script src="pesquisa.produto.js"></script>
<button class="btn btn-primary mb-4" id="btnAdicionarProduto" (click)="adicionarProduto()">Adicionar Produto</button>

<div class="table-responsive" style="height: 423px;">
  <table class="table table-striped table-dark table-hover">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Descrição</th>
        <th>Preço</th>
        <th>Imagem</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of produtos">
        <td style="min-width:12%">{{p.nome}}</td>
        <td style="width:50%">{{p.descricao}}</td>
        <td style="width:10%">R$ {{p.preco}}</td>
        <td style="width:10%">
          <div class='photo'>
            <img src="../../../../../arquivos/{{p.nomeArquivo}}" />
            <div class='fixeddiv'>
              <img src="../../../../../arquivos/{{p.nomeArquivo}}" style="width: 399px;height: 300px;" />
            </div>
          </div>
        </td>
        <td style="width:5%"><button class="btn btn-success btn-sm" (click)="editarProduto(p)">Editar</button></td>
        <td style="width:5%">
          <button class="btn btn-danger btn-sm" data-toggle="modal" data-target="#modalAviso">Deletar</button>
          <div class="modal fade" id="modalAviso" tabindex="-1" role="dialog" aria-labelledby="DeletarProduto" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-sm" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="TituloModalCentralizado">Deletar</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  Deseja realmente deletar o produto selecionado ?
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                  <button type="button" class="btn btn-primary" (click)="deletarProduto(p)" data-dismiss="modal">Salvar mudanças</button>
                </div>
              </div>
            </div>
          </div>
        </td>
      </tr>
    </tbody>

  </table>
</div>
